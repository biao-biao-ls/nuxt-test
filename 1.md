我们通过以下代码，在`app.vue`中集成了第三方在线聊天功能：
```ts
// 引入外部QuickChat脚本
useHead({
  script: [
    {
      src: "https://test-chat-quickcep.jlcerp.com/initQuickChat.js?platform=others&accessId=a2252def-c98d-433c-a811-86fef1fc62fd",
      async: true,
    },
  ],
});
```
通过以下文档方案实现livechat定制界面：

## SDK方案：
1. 配置中心获取url + 是否自定义
2. 暴露`quickChatApi.mountCustomHeader`方法
3. 客户通过`quickChatApi.mountCustomHeader`等方法注入他们的组件或代码

注意事项:

1. Css样式需用 内联样式 / CSS-in-JS, 如style={{}} 或 styled-components 之类，避免依赖全局选择器。否则需要手动通过shadowRoot注入组件css样式表

方法:
```ts
declare global {
  interface Window {
    quickChatReadyHook?: () => void;
    quickEmitter?: {
      on: (event: string, callback: (config: any) => void) => void;
    };
    quickChatApi?: {
       // 设置值到输入框
      setInInputValue: (value: string) => void;
      // 直接发送消息
      sendMessage: (value: string) => void;
      // 触发获取所有座席状态
      emitGetAllOperatorStatus: (operators: string[]) => void;
      // 挂载到底部弹窗
      bottomCustomDrawer: {
        mount: (renderFn: (container: HTMLElement, shadowRoot: ShadowRoot) => void) => void;
        setIsShow: (isShow: boolean) => void;
      };
      // 挂载到左侧弹窗 (移动端使用)
      leftCustomDrawer: {
        mount: (renderFn: (container: HTMLElement, shadowRoot: ShadowRoot) => void) => void;
        setIsShow: (isShow: boolean) => void;
      };
      // 挂载到头部
      customHeader: {
        mount: (renderFn: (container: HTMLElement, shadowRoot: ShadowRoot) => void) => void;
      };
      // 挂载到底部按钮区域
      customFooter: {
        mount: (renderFn: (container: HTMLElement, shadowRoot: ShadowRoot) => void) => void;
      };
      // 挂载到侧边栏
      customLeftBar: {
        mount: (renderFn: (container: HTMLElement, shadowRoot: ShadowRoot) => void) => void;
        setIsShow: (isShow: boolean) => void;
      };
      // 切换座席
      switchChat: (userId: string) => void
    };
  }
}
```
触发获取座席状态数据:
```ts
window.quickChatApi.emitGetAllOperatorStatus([]);
```

监听座席数据更新:
```ts
window.quickEmitter.on('chat.operator.status', (data: { operatorUserIdStatus: Record<string, number> }) => {
    console.log('operatorData', data);
    // {
    // "operatorUserIdStatus": {
    //    "1922621280413200385": 2
    // }
    // 1是离线 2 在线空闲 3 在线忙碌 和其他
}
});
```
切换座席:
```ts
window.quickChatApi.switchChat('123123');
```
监听切换座席成功:
```ts
 window.quickEmitter.on(
          'chat.switch.operator.success',
          () => {
            console.log('切换座席成功');
          }
    );
```
监听点击聊天icon:

```ts
 window.quickEmitter.on(
          'chat.model.toggleChat',
          (data: { isOpen:boolean }) => {
            console.log('点击聊天探头');
          }
    );
```
监听成功获取消息列表:
```ts
 window.quickEmitter.on(
          'chat.getMessageList.success',
          (data) => {
            console.log('拉取消息列表成功');
          }
    );
```
示例如下: 
```ts
window.quickChatReadyHook = function () {
      if (window.quickEmitter) {
        window.quickEmitter.on('chat.operator.status', (data: { operatorUserIdStatus: Record<string, number> }) => {
          console.log('operatorData', data);
        });
        if (window.quickChatApi) {
          window.quickChatApi.emitGetAllOperatorStatus([]);
          window.quickChatApi.customHeader.mount((container: HTMLElement) => {
            const root = ReactDOM.createRoot(container);
            root.render(<MyHeader />);
          });
          window.quickChatApi.customFooter.mount((container: HTMLElement) => {
            const root = ReactDOM.createRoot(container);
            root.render(<MyBtn />);
          });
          window.quickChatApi.customLeftBar.mount(
            (container: HTMLElement, shadowRoot) => {
              // 注入自定义样式
              const customStyle = document.createElement('style');
              customStyle.textContent = `
                  .leftBarWrapper {
                    color: blue
                  }
                `;
              shadowRoot.appendChild(customStyle);

              // 注入客户的代码
              const root = ReactDOM.createRoot(container);
              root.render(<LeftBar />);
            }
          );
        } else {
          console.warn('quickChatApi is not ready yet');
        }
      } else {
        console.warn('quickEmitter is not ready yet');
      }
    };

```